<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Simulador Insidemoney ‚Äì Preju√≠zo Fiscal</title>

<style>
/* ============================= */
/*      ESTILOS PRINCIPAIS       */
/* ============================= */

:root {
  --fundo: #f4f0eb;
  --primaria: #0083a3;
  --primaria-clara: #18c3f0;
  --laranja: #f08018;
  --caramelo: #d8854d;
  --texto: #1c1c1c;
  --texto-sec: #666;
  --branco: #ffffff;

  --verde-beneficio: #008f39;
  --verde-bg: #e3f9e9;

  --vermelho-prejuizo: #d14a3b;
  --vermelho-bg: #ffe7e3;
}

body {
  font-family: Arial, sans-serif;
  background: var(--fundo);
  color: var(--texto);
  margin: 0;
  padding: 20px;
  width: 760px;   /* üî• FIXO: funciona no Canva */
  box-sizing: border-box;
}

h2 {
  font-size: 25px;
  color: var(--primaria);
  margin-bottom: 6px;
}

.subtitle {
  color: var(--texto-sec);
  font-size: 13px;
  margin-bottom: 24px;
  max-width: 680px;
}

.container {
  display: flex;
  flex-direction: row;
  gap: 18px;
  width: 100%;
}

/* ============================= */
/*            PAIN√âIS            */
/* ============================= */

.panel {
  background: var(--branco);
  padding: 18px;
  border-radius: 16px;
  border: 2px solid #ddd2c7;
  box-shadow: 0 1px 4px rgba(0,0,0,0.05);
  flex: 1;
}

.panel-title {
  font-size: 16px;
  font-weight: bold;
  color: var(--primaria);
  margin-bottom: 4px;
}

.panel-sub {
  font-size: 12px;
  color: var(--texto-sec);
  margin-bottom: 14px;
}

/* ============================= */
/*             INPUTS            */
/* ============================= */

.input-group {
  margin-bottom: 16px;
}

label {
  display: block;
  font-weight: bold;
  font-size: 13px;
  margin-bottom: 5px;
}

input[type="number"],
select {
  width: 100%;
  padding: 9px 10px;
  font-size: 14px;
  border-radius: 9px;
  border: 1px solid #ccc;
  background: #fafafa;
  box-sizing: border-box;
}

input[type="range"] {
  width: 100%;
  margin: 5px 0 6px 0;
}

/* ============================= */
/*          CARDS RESULT         */
/* ============================= */

.results-card {
  padding: 14px;
  border-radius: 14px;
  margin-bottom: 12px;
  border: 2px solid transparent;
}

.card-info {
  background: rgba(0,131,163,0.08);
  border-color: var(--primaria);
}

.card-prejuizo {
  background: var(--vermelho-bg);
  border-color: var(--vermelho-prejuizo);
}

.card-beneficio {
  background: var(--verde-bg);
  border-color: var(--verde-beneficio);
}

.results-card h4 {
  margin: 0 0 6px 0;
  font-size: 14px;
  font-weight: bold;
}

.value {
  font-size: 20px;
  font-weight: bold;
}

.value.red { color: var(--vermelho-prejuizo); }
.value.green { color: var(--verde-beneficio); }

/* ============================= */
/*          AVISO FINAL          */
/* ============================= */

.important {
  background: rgba(240,128,24,0.12);
  border: 2px solid var(--laranja);
  padding: 12px;
  border-radius: 14px;
  font-size: 12px;
  margin-top: 14px;
  color: var(--texto-sec);
}

/* ============================= */
</style>
</head>

<body>

<h2>Simulador de Preju√≠zo Fiscal ‚Äì Rendimentos no Exterior</h2>

<p class="subtitle">
  Descubra quanto imposto pode estar sendo acumulado como <strong>passivo oculto</strong> no Brasil por receber renda
  do exterior sem declarar ‚Äî e compare isso com o investimento para regularizar sua situa√ß√£o fiscal.
</p>

<div class="container">

  <!-- ======================== -->
  <!--     COLUNA ESQUERDA      -->
  <!-- ======================== -->
  <div class="panel">
    <div class="panel-title">Par√¢metros</div>
    <div class="panel-sub">Insira valores aproximados.</div>

    <div class="input-group">
      <label>Pa√≠s onde voc√™ reside</label>
      <select id="pais" onchange="calcular()">
        <option value="">Selecione</option>
        <!-- LISTA EXTENSA DE PA√çSES (reduzida aqui para caber) -->
        <option>Alemanha</option>
        <option>Estados Unidos</option>
        <option>Reino Unido</option>
        <option>Portugal</option>
        <option>Fran√ßa</option>
        <option>Canad√°</option>
        <option>Austr√°lia</option>
        <option>Jap√£o</option>
        <option>Su√≠√ßa</option>
        <option>Noruega</option>
        <option>Uruguai</option>
        <!-- (Voc√™ pode adicionar todos os pa√≠ses novamente) -->
      </select>
    </div>

    <div class="input-group">
      <label>Sal√°rio anual bruto (USD)</label>
      <input type="range" id="salarioRange" min="10000" max="300000" value="80000" step="1000"
             oninput="syncSalario(this.value)">
      <input type="number" id="salario" value="80000" oninput="syncSalarioInput(this.value)">
      <small>Antes de imposto, usado apenas para simula√ß√£o.</small>
    </div>

    <div class="input-group">
      <label>Anos recebendo renda do exterior</label>
      <input type="range" id="anosRange" min="1" max="20" value="4" step="1" oninput="syncAnos(this.value)">
      <input type="number" id="anos" value="4" oninput="syncAnosInput(this.value)">
      <small>A Receita pode cobrar at√© 6 anos.</small>
    </div>

    <div class="input-group">
      <label>Al√≠quota federal no exterior (%)</label>
      <input type="number" id="aliquotaExt" value="15" oninput="calcular()">
      <small>Apenas imposto federal costuma ser compens√°vel no Brasil.</small>
    </div>

    <div class="input-group">
      <label>C√¢mbio USD ‚Üí BRL</label>
      <input type="number" id="cambioUSD" value="5.0" step="0.1" oninput="calcular()">
    </div>

    <div class="input-group">
      <label>C√¢mbio EUR ‚Üí BRL</label>
      <input type="number" id="cambioEUR" value="6.0" step="0.1" oninput="calcular()">
    
    </div>
  </div>

  <!-- ======================== -->
  <!--     COLUNA DIREITA       -->
  <!-- ======================== -->
  <div class="panel" id="resultado">
    <div class="panel-title">Resultados</div>
    <div class="panel-sub">Preencha os dados ao lado para visualizar.</div>
  </div>

</div>

<script>
/* ======== Fun√ß√µes utilit√°rias ========= */
const fmtBRL = new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});

function syncSalario(v){document.getElementById("salario").value=v;calcular();}
function syncSalarioInput(v){document.getElementById("salarioRange").value=v;calcular();}
function syncAnos(v){document.getElementById("anos").value=v;calcular();}
function syncAnosInput(v){document.getElementById("anosRange").value=v;calcular();}

/* ======== IRPF Brasil (maio/2025) ======== */
function irpfBrasilMensal(base){
  if (base <= 2428.80) return 0;
  if (base <= 2826.65) return base*0.075 - 182.16;
  if (base <= 3751.05) return base*0.15 - 394.16;
  if (base <= 4664.68) return base*0.225 - 675.49;
  return base*0.275 - 908.73;
}

/* ============= C√ÅLCULO GERAL ============= */
function calcular(){
  const pais = document.getElementById("pais").value;
  const salarioUSD = parseFloat(document.getElementById("salario").value);
  const anosTotal = parseFloat(document.getElementById("anos").value);
  const aliqExt = parseFloat(document.getElementById("aliquotaExt").value)/100;
  const cambioUSD = parseFloat(document.getElementById("cambioUSD").value);
  const cambioEUR = parseFloat(document.getElementById("cambioEUR").value);

  if (!pais) return;

  const anos = Math.min(anosTotal, 6);

  const salarioBRL = salarioUSD * cambioUSD;
  const baseMensalBRL = salarioBRL / 12;

  const irAnoBR = Math.max(irpfBrasilMensal(baseMensalBRL), 0) * 12;
  const irTotalBR = irAnoBR * anos;

  const impostoExtAnoBRL = salarioUSD * aliqExt * cambioUSD;
  const impostoExtTotalBRL = impostoExtAnoBRL * anos;

  const paisesComAcordo = new Set([
    "Alemanha","Estados Unidos","Reino Unido","Portugal","Fran√ßa","Canad√°",
    "Jap√£o","It√°lia","Holanda","B√©lgica","Su√©cia","Su√≠√ßa","Noruega","Uruguai"
  ]);

  const temAcordo = paisesComAcordo.has(pais);

  let compensacao = temAcordo ? Math.min(irTotalBR, impostoExtTotalBRL) : 0;
  let impostoBrasilDevido = irTotalBR - compensacao;

  const prejuizoAnual = irAnoBR - (temAcordo ? Math.min(impostoExtAnoBRL, irAnoBR) : 0);

  const precoServicoBRL = 1197 * cambioEUR;

  const ROI = ((impostoBrasilDevido - precoServicoBRL) / precoServicoBRL) * 100;
  const paybackMeses = precoServicoBRL / (prejuizoAnual/12);

  document.getElementById("resultado").innerHTML = `
      <div class="panel-title">Resultados</div>

      <div class="results-card card-info">
        <h4>IRPF Brasil total</h4>
        <div class="value">${fmtBRL.format(irTotalBR)}</div>
      </div>

      <div class="results-card card-info">
        <h4>Imposto pago no exterior</h4>
        <div class="value">${fmtBRL.format(impostoExtTotalBRL)}</div>
      </div>

      <div class="results-card card-prejuizo">
        <h4>Passivo fiscal estimado</h4>
        <div class="value red">${fmtBRL.format(impostoBrasilDevido)}</div>
      </div>

      <div class="results-card card-beneficio">
        <h4>Servi√ßo (1197 ‚Ç¨)</h4>
        <div class="value green">${fmtBRL.format(precoServicoBRL)}</div>
        <br>
        <strong>ROI:</strong> <span class="value green">${ROI.toFixed(0)}%</span><br>
        <strong>Payback:</strong> <span class="value green">${paybackMeses.toFixed(1)} meses</span>
      </div>

      <div class="important">
        Normalmente, apenas o imposto federal pode ser compens√°vel no Brasil.  
        Previd√™ncia, taxas locais e outras contribui√ß√µes n√£o entram no cr√©dito.  
        Avalia√ß√£o sempre caso a caso.
      </div>
    `;
}

</script>
</body>
</html>
